<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="main.css" />
  <script>
    function validate() {
      var name = document.querySelector("#uname").value;
      var pass = document.querySelector("#pass").value;
      if (name.length < 1 || pass.length < 1)
        alert("Username and pass cannot be empty");
    }
  </script>
  <title>Login</title>
  <script>
    function handlelogin() {
      const uname = document.getElementById("uname").value;
      const pass = document.getElementById("pass").value;
      fetch("http://localhost:8000/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          username: uname,
          password: pass,
        }),
      })
        .then((res) => {
          if (res.status === 200) window.location.href = "/";
          else alert("Invalid Login Credentials");
        })
        .catch((err) => console.log(err));
    }
  </script>
</head>

<body>
  <div class="form">
    <h1>Login</h1>
    <form class="login-form">
      <input required type="text" placeholder="username" id="uname" onchange="validate();" />
      <input required type="password" placeholder="password" id="pass" onchange="validate();" />
      <button type="button" onclick="handlelogin();">login</button>
    </form>
  </div>
</body>

</html>